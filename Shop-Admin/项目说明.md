# 电商后台管理系统

---

[TOC]

## 项目说明

系统包含6大模块

- 用户登录
- 订单管理
- 商品管理
- 店长管理
- 财务管理
- 基础设置

所用到的技术栈：

Vue3 + Element Plus + Vue Router + Pinia + Echarts



项目目录：

src 

> assets
>
> views  --- | home --- Home.vue
>            --- | login --- Login.vue
>
> router(tools) --- | index.js
>
> > 一级路由：Home.vue、Login.vue
> >
> > Home的子路由：Order、
>
> store --- | storage.js （userName, userPassword, isLogin, clearUserInfo, registUserInfo、clearUserInfo、registerUserInfo、）
>
> App.vue
>
> main.js

## 项目搭建

- npm create vite

  > 项目名称：shop-admin

- npm i vue-router@4 --save

- npm i pinia --save

## 一、用户登录模块

后台管理系统需要管理员权限才能进行操作，因此用户登录是必不可少的一个模块

- 未登录状态下：后台管理系统的所有功能都应该不可用，可以用路由前置守卫，强制跳转到登录页进行登录

### 1、主页、登录页初始化

1. conponents 文件夹下新建两个子文件夹：home、login

2. home 目录下新建 Home.vue、login 目录下新建 Login.vue

views |-- home -- Home.vue
		     |-- login  -- Login.vue

views /home/Home.vue 文件
```vue
<script setup>

</script>

<template>
  主页
</template>

<style scoped>
  
</style>
```

components/login/Login.vue 文件

```vue
<script setup>

</script>

<template>
  登录页面
</template>

<style scoped>
  
</style>
```



### 2、路由、状态管理初始配置

由于此后台系统的任何功能都需要登录后操作，因此需要使用路由来进行全局的页面管理

在每次页面跳转前，都检查一下当前的用户登录状态

- 未登录：将页面重定向到登录页面

#### 状态管理 Pinia

src 目录下新建 store 文件夹，新建 store/storage.js 文件，用于全局状态配置

```js
// 导入 pinia
import { defineStore } from "pinia";
import { ref, computed } from 'vue'

const store = defineStore('UserStore', () => {
  // 全局存储用户名、密码
  const userName = ref('')
  const userPassword = ref('')
  // 进行是否登录的判断，因为没有涉及到后台，所以先暂时用用户名是否大于0进行判断
  const isLogin = computed(() => {
    return userName.value.length > 0
  })
  return { userName, userPassword, isLogin}
})

// 导出 store
export default store
```

#### 路由 Vue Router

src 目录下新建 router 文件夹，新建 router/index.js，进行路由配置

```js
// 导入 vue-router
import { createRouter, createWebHashHistory } from "vue-router"

// 导入路由组件
import Login from '../components/login/Login.vue'
import Home from '../components/home/Home.vue'

// 导入 store/storage.js 中的 store 状态数据
import store from '../store/storage.js'

// 创建路由实例
const router = createRouter({
  history: createWebHashHistory(),
  routes: [
    { 
      path: '/login', 
      component: Login, 
      name: 'login'
    },
    {
      path: '/home',
      component: Home,
      name: 'home'
    }
  ]
})

// 路由前置守卫，当未登录时，非登录页面的其他页面都不允许跳转
router.beforeEach((from) => {
   // 不能和导入进来的 store 的名字一样
  const Store = store()
  let isLogin = Store.isLogin
  // 如果账户名不为0，并且是从 login 路由地址过来的，那么就认为是已经登录
  // 否则都认为是未登录状态，强制跳转到名为 login 的路由地址
  if(isLogin || from.name == 'login'){
    return true
  } else {
    return { name: 'login'}
  }
})

export default router
```

在 App 根组件中，使用路由占位符

```vue
App.vue
<script setup>

</script>

<template>
  <router-view></router-view>
</template>

<style scoped>

</style>

```

#### main.js 中完成 pinia、router的挂载使用

main.js 入口文件

```js
import { createApp } from 'vue'
import App from './App.vue'

// 导入pinia、路由
import { createPinia } from 'pinia'
import router from '@/router/index.js'

const app = createApp(App)


app.use(createPinia())
app.use(router)
app.mount('#app')
```

至此，已经创建了后台管理系统的入口框架。

运行代码，无论输入怎样的页面路由，如果没有输入用户名、密码。都会跳转到 login 的登录路由地址

![image-20250216162453618](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250216162453618.png)

### 3、用户登录界面开发

涉及到 Vue项目的组件页面开发，离不开 Element Plus 组件库

1. 为 vue 项目安装引入 elment-plus：

   > npm i element-plus --save
   >
   > npm i @element-plus/icons-vue --save

2. main.js 入口文件中添加 element-plus 模块的相关初始化代码

   > ```js
   > // 导入 element-plus、引入 css 样式、引入图标
   > import ElementPlus from 'element-plus'
   > import 'element-plus/dist/index.css'
   > import * as ElementPlusIconsVue from '@element-plus/icons-vue'
   > 
   > const app = createApp(App)
   > 
   > // 遍历 ElementPlusIconsVe 中的所有组件，并进行注册
   > for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
   >   app.component(key, component)
   > }
   > 
   > app.use(ElementPlus)
   > ```

#### 编写用户注册方法、清除缓存的用户信息方法

src/store/storage.js

```js
// 在登录判断函数下面添加
// 清除缓存的用户信息，登出使用
  const clearUserInfo = () => {
    userName.value = ''
    userPassword.value = ''
  }

  // 注册用信息，登录使用
  const registUserInfo = (name, password) => {
    userName.value = name
    userPassword.value = password
  }
  return { userName, userPassword, isLogin, clearUserInfo, registUserInfo}
```

后面会通过 store 对象执行 clearUserInfo、registerUserInro 这两个方法来模拟登录、注销这两个动作

#### 编写 Login.vue 组件页面结构

src/components/login/Login.vue

```vue
<script setup>
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage } from 'element-plus'
import storage from '../../store/storage'

const store = storage()
const router = useRouter()

// 用户名、密码
const name = ref('')
const password = ref('')
const disabled = computed(() => {
  return name.value.length === 0 || password.value.length < 6
})
// 用户登录成功后，会有登录成功后的弹框提示，并且设置3s定时器再跳转到首页路由地址，模拟向后台请求数据延时
function login() {
  store.registUserInfo(name.value, password.value)
  ElMessage({
    type: 'success',
    message: '登录成功',
    duration: 3000
  })
  setTimeout(() => {
    router.push({ name: 'home'})
  }, 3000)
} 
</script>

<template>
  <div id="container">
    <div id="title">
      <h1>电商管理系统</h1>
    </div>
    <div class="input">
      <el-input prefix-icon="User"  v-model="name" placeholder="请输入用户名"></el-input>
    </div>
    <div class="input">
      <el-input prefix-icon="Lock" v-model="password" placeholder="请输入密码" auto-complete="new-password" show-password></el-input>
    </div>
    <div class="input">
      <el-button type="primary" style="width: 30rem" @click="login" :disabled="disabled">登录</el-button>
    </div>
  </div>
</template>

<style scoped>
#title {
  text-align: center;
  /* color: azure; */
  margin-top: 200px;
}
.input{
  width: 30rem;
  margin: 2rem auto;
}
</style>
```

至此，当输入用户名、大于等于6位数的密码之后，登录按钮才会启用

点击登录后，会先弹出3秒的登录成功的提示框，然后在3秒之后跳转到首页

![image-20250216175620110](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250216175620110.png)

## 二、后台主页界面开发

### 1、主页框架的搭建

需要先编写后台主页的框架结构

- 左：侧边栏菜单
- 右：主体功能模块

大模块：

- 订单管理
- 商品管理
- 店长管理
- 财务管理
- 基础管理

编写 Home.vue 的模板结构

```vue
<script setup>
import { useRouter } from 'vue-router'

const router = useRouter()

// 根据选中的选项来跳转相应的组件
function selectItem(path) {
  router.push(path)
}
</script>

<template>
  <el-container id="container">
    <el-aside width="15rem">
      <el-container id="top">
        <img src="../../assets/vue.svg" alt="logo" style="width: 25px; height: 25px; margin: auto; margin-right: 0;">
        <div style="margin: auto; margin-left: 10px; color: #fff; font-size: 17px;">电商后台管理</div>
      </el-container>
      <el-menu
      :default-active="$route.path"
      style="height: 100%;"
      background-color="#545c64"  
      text-color="#fff"
      active-text-color="#ffd04b" 
      @select="selectItem">
        <!-- 订单管理 -->
        <el-sub-menu index="1">
          <template #title>
            <el-icon><List /></el-icon>
            <span>订单管理</span>
          </template>
          <el-menu-item index="/home/order/0">普通订单</el-menu-item>
          <el-menu-item index="/home/order/1">秒杀订单</el-menu-item>
        </el-sub-menu>
        <!-- 商品管理 -->
        <el-sub-menu index="2">
          <template #title>
            <el-icon><Shop /></el-icon>
            <span>商品管理</span>
          </template>
          <el-menu-item index="/home/goods/0">普通商品</el-menu-item>
          <el-menu-item index="/home/goods/1">秒杀商品</el-menu-item>
          <el-menu-item index="/home/goods/2">今日推荐</el-menu-item>
          <el-menu-item index="/home/category">商品分类</el-menu-item>
        </el-sub-menu>
        <!-- 店长管理 -->
        <el-sub-menu index="3">
          <template #title>
            <el-icon><Avatar /></el-icon>
            <span>店长管理</span>
          </template>
          <el-menu-item index="/home/ownerlist">店长列表</el-menu-item>
          <el-menu-item index="/home/ownerreq">店长申请审批列表</el-menu-item>
          <el-menu-item index="/home/ownerorder">店长订单</el-menu-item>
        </el-sub-menu>
        <!-- 财务管理 -->
        <el-sub-menu index="4">
            <template #title>
              <el-icon><Ticket /></el-icon>
              <span>财务管理</span>
            </template>
            <el-menu-item index="/home/tradeinfo">交易明细</el-menu-item>
            <el-menu-item index="/home/tradelist">财务对账订单</el-menu-item>
        </el-sub-menu>
        <!-- 基础管理 -->
        <el-sub-menu index="5">
            <template #title>
              <el-icon><Tools /></el-icon>
              <span>基础管理</span>
            </template>
            <el-menu-item index="/home/data">数据统计</el-menu-item>
        </el-sub-menu>
      </el-menu>
    </el-aside>
    <el-main>
      <!-- 添加一个通用的头部，用来展示注销登录及其他 -->
       <el-header style="margin:0;padding:0;" height="80px">
        <el-container style="background-color:blanchedalmond;margin:0;padding:0;height:80px">
          <div style="margin: auto;margin-left:100px"><h1>欢迎您登录后台管理系统，管理员用户!</h1></div>
          <div style="margin: auto;margin-right:50px"><el-button type="primary" @click="logout">退出登录</el-button></div>
        </el-container>
       </el-header>
      <!-- 用来渲染每个模块的主体部分 -->
       <router-view></router-view>
    </el-main>
  </el-container>
</template>

<style scoped>
#container {
  width:100%;
  height: 100%;
  position: absolute;
}
#top {
  background-color: #545c64;
  text-align: center;
  height: 60px;
  margin-right:1px;

}
</style>
```

如上代码，在侧边栏导航中，将所有包含的功能模块都添加了进来

不同模块对应不同的组件，后面只需要逐个模块进行开发即可

为了保证导航栏的选中栏目与当前页面路由相匹配，将导航 selectItem 的 index 设置为路由的 path

并将 el-menu 组件的 default-active 属性绑定到了当前路由的 path 属性上：$route.path，这样就自动实现了联动效果

### 2、新建模块组件，添加子路由

在 componets 下新建每个路由地址的组件

![image-20250216193358903](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250216193358903.png)

在 src/router/index.js 中添加子路由

```js
// 导入 vue-router
import { createRouter, createWebHashHistory } from "vue-router"

// 导入路由组件
import Login from '../views/login/Login.vue'
import Home from '../views/home/Home.vue'

// 导入 store/storage.js 中的 store 状态数据
import store from '../store/storage.js'


// 创建路由实例
const router = createRouter({
  history: createWebHashHistory(),
  routes: [
    { 
      path: '/login', 
      component: Login, 
      name: 'login'
    },
    {
      path: '/home',
      component: Home,
      name: 'home',
      children: [
        // 订单管理子路由
        { 
          path: '/:pathMatch(.*)*',  // 0是普通订单
          component: () => import('../components/order/Order.vue'),
          name: "Order"
        },
        // 商品管理子路由
        { 
          path: 'goods/:type',  // 0是普通商品, 1是秒杀商品
          component: () => import('../components/goods/Goods.vue'),
          name: "Goods"
        },
        // 添加商品子路由
        { 
          path: 'addgoods/:type', 
          component: () => import('../components/goods/AddGoods.vue'),
          name: "AddGoods"
        },
        // 商品分类子路由
        {
          path:'category',
          component: () => import('../components/goods/GoodsCategory.vue'),
          name:"GoodsCategory"
        },
        // 店长列表子路由
        {
          path:'ownerlist',
          component: () => import('../components/manager/ManagerList.vue'),
          name:'ManagerList'
        },
        // 店长申请列表子路由
        {
            path:'ownerreq',
            component: () => import('../components/manager/ManagerReqList.vue'),
            name:'ManagerReqList'
        
        },
        // 店长订单子路由
        {
            path:'ownerorder',
            component: () => import('../components/manager/ManagerOrder.vue'),
            name:'ManagerOrder'
        },
        // 财务明细子路由
        {
            path:'tradeinfo',
            component: () => import('../components/financial/TradeInfo.vue'),
            name:'TradeInfo'
        },
        // 财务对账订单
        {
            path:'tradelist',
            component: () => import('../components/financial/TradeList.vue'),
            name:'TradeList'
        },
        // 基础设置、数据统计子路由
        {
            path:'data',
            component: () => import('../components/financial/DataCom.vue'),
            name:'DataCom'
        }
      ],
      // 每次登录都重定向到 /home/order/0 这个页面
      redirect: '/home/order/0'
    }
  ]
})

// 路由前置守卫，当未登录时，非登录页面的其他页面都不允许跳转
router.beforeEach((from) => {
  // 不能和导入进来的 store 的名字一样
 const Store = store()
 let isLogin = Store.isLogin
 // 如果账户名不为0，并且是从 login 路由地址过来的，那么就认为是已经登录
 // 否则都认为是未登录状态，强制跳转到名为 login 的路由地址
 if(isLogin || from.name == 'login'){
   return true
 } else {
   return { name: 'login'}
 }
})

export default router
```

### 3、完善注销功能

点击退出登录按钮，返回到登录页面

在 Home.vue 组件中定义注销登录 logout 函数

```js
import storage from '../../store/storage'
import { ElMessage, ElMessageBox } from 'element-plus'

// 退出登录
function logout() {
  ElMessageBox.confirm(
  '是否要退出登录',
  {
    confirmButtonText: '确定',
    cancelButtonText: '取消',
    type: 'warning',
  }).then(() => {
    ElMessage({
      type: 'success',
      message: '退出登录成功',
    })
    setTimeout(() => {
      store.clearUserInfo()
      router.push({name: 'login'})
    },3000)
  })
}
```



## 三、订单管理模块的开发

#### 1、使用 Mock.js 进行模拟数据的生成

Mock.js是一款基于 JS 的小巧的模拟数据的生成器，在 vue 项目中，我们可以使用 Mock.js 生成随机数据，方便在前端开发中调页面功能

1. 安装 Mock.js 模块：npm i mockjs --save
2. 安装完成后，在 src 文件下新建 mock 文件夹，新建 mock.js 的文件

src/mock/mock.js

```js
import mockjs from 'mockjs'

const mock = {
  // 模拟获取订单数据
  // type: 订单类型。0 为普通订单，1 为秒杀订单
  getOrder(type){
    let array = [];
    for (let i = 0; i < mockjs.Random.integer(5, 10); i++){
      array.push(mockjs.mock({
        'name': type === 0 ? '普通商品' : '秒杀商品' + i,
        'prcie': mockjs.Random.cname(),
        'buyer': mockjs.Random.datetime('yyyy-MM-dd A HH:MM:SS'),
        'time': mockjs.Random.boolean(),
        'state':mockjs.Random.boolean(),
        'payType':mockjs.Random.boolean(),
        'source':mockjs.Random.url(),
        'phone':mockjs.mock(/\d{11}/)
      }))
    }
    return array
  }
  // 模拟获取商品数据
}
export default mock
```

以上代码提供了一个获取订单列表的 getOrder() 方法，该方法将返回生成的模拟数据

可以在控制台打印 getOrder() 方法，查看下随机生成的数据

随便在一个组件的 <script> 节点

```vue
<script setup>
import mock from '../../mock/mock'
console.log(mock.getOrder())
</script>
```

![image-20250216214131177](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250216214131177.png)



#### 2、编写工具类函数、全局样式

在编写具体的功能模块之前，需要先分析一下这些功能模块是否有通用的部分

有些样式是通用的，例如：

- 容器样式
- 输入框样式等

可以将这些通用的样式定义为全局样式

对于一些工具方法，将其整合到一个单独的 JS 模块中，方便复用

在 App.vue 中编写通用样式，将 <style> 标签中的 scoped 样式独立属性关闭

```vue
<script setup>

</script>

<template>
  <router-view></router-view>
</template>

<style>
body {
  height: 100%;
  width: 100%;
  position: absolute;
  margin: 0;
  padding: 0;
  background-color: #f1f1f1;
}
.content-container {
  background-color: #fff;
  padding: 20px;
  margin: 20px;
  border-radius: 10px;
  min-width: 1200px;
  display: inline-block;
  width: 90%;
}
.input-tip {
  margin: 0 10px;
  line-height: 40px;
}
.input-field {
  margin-right: 40px;
}
.content-row {
  margin-bottom: 20px;
}
</style>
```

后面在编写模板时，对于这些通用的样式直接使用即可



编写工具函数：在 src 下新建 tools 文件夹，新建 tools/tools.js 文件

```js
// tools.js
const tools = {
  exportJson(name, data) {
    var blob = new Blob([data])  // 创建 blob 对象
    var link = document.createElement('a')
    link.href = URL.createObjectURL(blob) // 创建一个 URL 对象并传给 a 元素的 href 属性
    link.download = name  // 设置下载的默认文件名
    link.click()
  }
}

export default tools
```

暂时只实现一个导出 JSON 文件的方法，在订单管理模块的订单导出相关功能中会使用到这个方法

#### 3、完善订单管理页面

主要任务包括：

- 搭建模板结构
- 将数据绑定到相应的页面元素，并为可交互的元素绑定事件处理函数

src/components/order/Order.vue 文件

```vue
<script setup>
import { ref, onMounted } from 'vue'
import { useRouter, onBeforeRouteUpdate } from 'vue-router'
import { ElMessage } from 'element-plus';
// 导入 mock 随机生成数方法
import mock from '../../mock/mock'
// 导入 导出 JSON 数据的方法
import tools from '../../tools/tools'




// 路由对象
const route = useRouter()
// 订单列表数据
const orderList = ref([])
// 筛选订单的参数
const queryParam = ref({
  goods: '',
  consignee: '',
  phone: '',
  name: '',
  payTime: '',
  sendTime: ''
})
// 当前选中的订单对象
const multipleSlection = ref([])
// 组件加载时获取数据
onMounted(() => {
  orderList.value = mock.getOrder(route.params)
}) 
// 路由更新时刷新数据
onBeforeRouteUpdate((to) => {
  orderList.value = mock.getOrder(to.params)
})
// 模拟请求数据
function requestData() {
      ElMessage({
        type: 'success',
        message: '筛选请求参数: ' + JSON.stringify(queryParam.value)
      })
      orderList.value = mock.getOrder(route.params)
}
// 切换 tab 刷新数据
function handleClick(tab){
  ElMessage({
    type: 'success',
    message: '切换 tab 刷新数据: ' + tab.props.label
  })
  orderList.value = mock.getOrder(route.params)
}
// 清空筛选项
function clear() {
  queryParam.value = {
    goods: '',
    consignee: '',
    phone: '',
    name: '',
    payTime: '',
    sendTime: ''
  }
  orderList.value = mock.getOrder(route.params)
}
// 导出订单
function exportData() {
  tools.exportJson('订单.Json', JSON.stringify(orderList.value))
}
// 导出选中的发货单
function exportDispatchGoods() {
  tools.exportJson('发货单.json', JSON.stringify(multipleSlection.value))
}
// 处理多选
function handleSelectionChange(val) {
  multipleSlection.value = val
}
// 进行发货
function dispatchGoods() {
  ElMessage({
    type: 'success',
    message: '发货商品: ' + JSON.stringify(multipleSlection.value)
  })
}
// 删除订单
function deleteItem(item) {
  orderList.value.splice(item, 1)
}
// 联系用户
function callUser(item) {
  ElMessage({
    type: 'success',
    message: '联系客户: ' + item.phone 
  })
}
</script>

<template>
  <div class="content-container">
    <!-- input -->
    <div>
      <el-container class="content-row">
        <div class="input-tip">
          商品名称: 
        </div>
        <div class="input-field">
          <el-input v-model="queryParam.goods"></el-input>
        </div>
        <div class="input-tip">
          收货人: 
        </div>
        <div class="input-field">
          <el-input v-model="queryParam.consignee"></el-input>
        </div>
        <div class="input-tip">
          支付时间 
        </div>
        <div class="input-field">
          <el-date-picker 
          type="daterange" 
          range-separator="至" 
          start-placeholder="开始日期" 
          end-placeholder="结束日期"
          v-model="queryParam.payTime">
          </el-date-picker>
        </div>
      </el-container>
      <el-container class="content-row">
        <div class="input-tip">
          用户名称:
        </div>
         <div class="input-field">
          <el-input v-model="queryParam.name"></el-input>
        </div>
        <div class="input-tip">
          手机号:
        </div>
        <div class="input-field">
          <el-input v-model="queryParam.phone"></el-input>
        </div>
        <div class="input-tip">
                    发货时间:
        </div>
        <div class="input-field">
          <el-date-picker
          type="daterange"
          range-separator="至"
          start-placeholder="开始日期"
          end-placeholder="结束日期"
          v-model="queryParam.sendTime">
          </el-date-picker>
        </div>                
      </el-container>
    </div>
    <div class="content-row">
      <el-container>
        <el-button type="primary" @click="requestData">筛选</el-button>
        <el-button type="danger" @click="clear">清空筛选</el-button>
        <el-button type="primary" @click="exportData">导出</el-button>
        <el-button type="primary" @click="dispatchGoods">批量发货</el-button>
        <el-button type="primary" @click="exportDispatchGoods">下载批量发货样单</el-button>
      </el-container>
    </div>
    <!-- list -->
    <div>
      <el-tabs type="card" @tab-click="handleClick">
        <el-tab-pane label="全部"></el-tab-pane>
        <el-tab-pane label="未支付"></el-tab-pane>
        <el-tab-pane label="已支付"></el-tab-pane>
        <el-tab-pane label="待发货"></el-tab-pane>
        <el-tab-pane label="已发货"></el-tab-pane>
        <el-tab-pane label="支付超时"></el-tab-pane>
      </el-tabs>
      <el-table
      ref="multipleTable"
      :data="orderList"
      tooltip-effect="dark"
      style="width: 100%"
      @selection-change="handleSelectionChange">
        <el-table-column
        type="selection"
        width="55">
        </el-table-column>
        <el-table-column
        label="商品"
        width="100"
        prop="name">
        </el-table-column>
        <el-table-column
        label="总价/数量"
        width="100"
        prop="price">
        </el-table-column>
        <el-table-column
        label="买家信息"
        width="100"
        prop="buyer">
        </el-table-column>
        <el-table-column
        label="交易时间"
        width="200"
        prop="time">
        </el-table-column>
        <el-table-column
        label="分销信息"
        width="100"
        >
          <template #default="scope">
            <el-tag size="default" :type="scope.row.role ? 'primary' : 'info'">{{ scope.row.role ? '经理' : '分销员' }}</el-tag>          
          </template>
        </el-table-column>
        <el-table-column
        label="状态"
        width="100">
          <template #default="scope">
            <el-tag size="default" :type="scope.row.state ? 'success' : 'danger'">{{ scope.row.state ? '已完成' : '未完成' }}</el-tag>          
          </template>               
        </el-table-column>
        <el-table-column
        label="操作"
        width="200">
          <template #default="scope">
            <el-button size="small" type="danger" @click="deleteItem(scope.$index)">删除</el-button>
            <el-button size="small" type="primary" @click="callUser(scope.row)">联系客户</el-button>            
          </template>     
        </el-table-column>
        <el-table-column
        label="支付方式"
        width="100">
          <template #default="scope">
            <el-tag size="default">{{ scope.row.payType ? '微信' : '支付宝' }}</el-tag>          
          </template>
        </el-table-column>
        <el-table-column
        label="来源"
        width="200"
        prop="source">
        </el-table-column>
        </el-table>
    </div>
  </div>
</template>

<style scoped>
</style>
```

![image-20250217174034193](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250217174034193.png)

## 四、商品管理模块

分为几个组件

- Goods.vue：商品列表
- AddGoods.vue：新增商品页面
- GoodsBaseSetting：新增商品页面基础设置页面
- GoodsPriceSetting.vue：新增商品页面的价格库存页面
- GoosEdit.vue：新增商品页面的商品详情页面的编辑页面
- GoodsDetailSetting：新增商品页面的商品详情页面的
- GoodsCategory.vue：添加商品分类页面

商品管理模块与订单管理模块的开发过程基本类似

- 先布局页面
- 再将获取到的数据绑定到页面上
- 最后处理用户交互

#### 1、商品管理列表页

在 src/components 下新建 goods 子文件夹，新建 Goods.vue、AddGoods.vue

在 src/router/index.js 中注册这两个组件的子路由

```js
{
      path: '/home',
      component: Home,
      name: 'home',
      children: [
        // 商品管理子路由
        { 
          path: 'goods/:type',  // 0是普通商品, 1是秒杀商品
          component: () => import('../components/goods/Goods.vue'),
          name: "Goods"
        },
        // 添加商品子路由
        { 
          path: 'addgoods/:type',  // 0是普通商品, 1是秒杀商品
          component: () => import('../components/goods/AddGoods.vue'),
          name: "AddGoods"
        }
}
```

在编写模板代码之前，在 mock.js 文件中新增一个随机获取商品数据的方法

src/mock/mock.js 文件

```js
// 模拟获取商品数据
  getGoods(type) {
    let array = []
    for (let i = 0; i < mockjs.Random.integer(5, 10); i++){
      array.push(mockjs.mock({
        'name': type == 0 ? '普通商品' : '秒杀商品' + i ? '秒杀商品' : '今日推荐' + i,
        'img': mockjs.Random.dataImage('60x100', '商品示例图'),
        'prcie': mockjs.Random.integer(20, 500) + '元',
        'sellCount': mockjs.Random.integer(10, 100),
        'count': mockjs.Random.integer(10, 100),
        'back': mockjs.Random.integer(10, 100),
        'backPrcie': mockjs.Random.integer(0, 5000) + '元',
        'owner': mockjs.Random.cname(),
        'time':mockjs.Random.datetime('yyyy-MM-dd A HH:MM:SS'),
        'state':mockjs.Random.boolean(),
      }))
    }
    return array
  }
```

编写 Goods.vue 中的模板，与订单管理页面有些相似

```vue
<script setup>
import { ref, computed, onMounted } from 'vue'
import { useRoute, useRouter, onBeforeRouteUpdate } from 'vue-router'
import { ElMessage } from 'element-plus';
import mock from '../../mock/mock'

const route = useRoute()
const router = useRouter()
const goodsData = ref([])

// 模拟分类数据
const categorys = ref([
  '全部', '男装', '女装'
])

// 筛选商品的参数
const queryParams = ref({
  name: '',
  id: '',
  category: '',
  sellMode: 2,  // 0 否, 1 是, 2 全部
  expMode: 2,   // 0 否, 1 是, 2 全部
})

// sellMode是否上架
const sellModeString = computed({
  get() {
    // 2 是全部上架
    if(queryParams.value.sellMode === 2){
      return '全部'
    } 
    return queryParams.value.sellMode === 0 ? '是' : '否'
  },
  set(val) {
    queryParams.value.sellMode = val
  }
})
// 
const expModeString = computed({
  get() {
    if(queryParams.value.expMode === 2) {
      return '全部'
    }
    return queryParams.value.expMode === 0 ? '是' : '否'
  },
  set(val) {
    queryParams.value.expMode = val
  }
})
// 组件更新时获取商品数据
onMounted(() => {
  goodsData.value = mock.getGoods(route.params.type)
})
// 获取数据的方法
function requestData() {
  ElMessage({
    type: 'success',
    message: '筛选请求参数: ' + JSON.stringify(queryParams.value)
  })
  goodsData.value = mock.getGoods(route.params.type)
}
// 进行上架、下架操作
function operate(item){
  item.state = !item.state
}
// 清空筛选项
function clear() {
  queryParams.value = {
    name: '',
    id: '',
    category: '',
    sellMode: 2,  // 0 否, 1 是, 2 全部
    expMode: 2,   // 0 否, 1 是, 2 全部
  }
  goodsData.value = mock.getGoods(route.params.type)
}
// 新增商品，跳转到新增商品的页面，待会再写新增商品的页面
function addGood(){
  router.push({ name: 'AddGoods', params: {type: route.params.type}})
}
</script>

<template>
  <div class="content-container">
    <div>
      <!-- input -->
      <el-container class="content-row">
        <div class="input-tip">
          商品名称:
        </div>
        <div class="input-field">
          <el-input v-model="queryParams.name"></el-input>
        </div>
        <div class="input-tip">
          商品编号:
        </div>
        <div class="input-field">
          <el-input v-model="queryParams.id"></el-input>
        </div>
        <div class="input-tip">
          商品分类:
        </div>
        <div class="input-field">
          <el-select v-model="queryParams.category" placeholder="请选择分类" style="width: 150px">
            <el-option v-for="item in categorys" :key="item" :value="item"></el-option>
          </el-select>
        </div>
      </el-container>
      <el-container class="content-row">
        <div class="input-tip">
          是否上架:
        </div>
        <div class="input-field">
          <el-select v-model="sellModeString" style="width: 150px">
            <el-option key="0" label="否" :value="0"></el-option>
            <el-option key="1" label="是" :value="1"></el-option>
            <el-option key="2" label="全部" :value="2"></el-option>
          </el-select>
        </div>
        <div class="input-tip">
          是否过期:
        </div>
        <div class="input-field">
          <el-select v-model="expModeString" style="width: 150px">
            <el-option key="0" label="否" :value="0"></el-option>
            <el-option key="1" label="是" :value="1"></el-option>
            <el-option key="2" label="全部" :value="2"></el-option>
          </el-select>
        </div>
      </el-container>
    </div>
    <!-- button -->
    <div class="content-row" style="margin-bottom: 20px;">
      <el-container>
        <el-button type="primary" @click="requestData">检索</el-button>
        <el-button type="primary" @click="clear">显示全部</el-button>
        <el-button type="success" @click="addGood">新增商品</el-button>
      </el-container>
    </div>
    <!-- list -->
    <div>
      <el-table
      :data="goodsData"
      tooltip-effect="dark"
      style="width: 100%">
        <el-table-column label="商品" width="100">
          <template #default="scope">
            <div style="text-align: center">
              <el-image :src="scope.row.img"></el-image>
            </div>
            <div style="text-align: center">
              {{ scope.row.name }}
            </div>
          </template>
        </el-table-column>
        <el-table-column label="价格" width="100" prop="price"></el-table-column>
        <el-table-column label="销量" width="100" prop="sellCount"></el-table-column>
        <el-table-column label="库存" width="100" prop="count"></el-table-column>
        <el-table-column label="退款数量" width="100" prop="back"></el-table-column>
        <el-table-column label="退款金额" width="100" prop="backPrcie"></el-table-column>
        <el-table-column label="操作" width="100" prop="name">
          <template #default="scope">
            <el-button @click="operate(scope.row)" :type="scope.row.state ? 'danger': 'success' ">
              {{ scope.row.state ? '下架' : '上架' }}
            </el-button>
          </template>
        </el-table-column>
        <el-table-column label="管理员" width="100" prop="owner"></el-table-column>
        <el-table-column label="更新时间" width="100" prop="time"></el-table-column>
      </el-table>
    </div>
  </div>

</template>

<style scoped>
  
</style>
```

![image-20250217174047099](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250217174047099.png)

#### 2、新增商品页面

在商品管理列表页面有一个新增商品页面的按钮，点击就会跳转到新增商品页面的路由地址

在新增商品页面，需要对商品的诸多属性进行设置，可以使用 el-tab 组件将商品设置分成三个独立的模块

- 基础设置
- 价格库存设置
- 商品详情设置

每一个设置的模块都可以封装成一个独立的组件

1. 在 src/components/goods 文件夹下新建三个文件

   - GoodsBaseSettings.vue：基础设置页面组件
   - GoodsPriceSetting.vue：价格设置页面组件
   - GoodsDetialSetting.vue：商品详情设置页面组件

2. 在 AddGoods.vue 文件中定义 el-tab ，然后在相应位置引入该三个组件即可

   ```vue
   <script setup>
   import BaseSetting from './GoodsBaseSettings.vue'
   import PriceSetting from './GoodsPriceSetting.vue'
   import DetailSetting from './GoodsDetialSetting.vue'
   import { ref } from 'vue'
   
   const activeTab = ref("1")
   function handleClick(idx) {
   
   }
   </script>
   
   <template>
     <div class="content-caontainer">
       <el-tabs v-model="activeTab" type="card">
         <el-tab-pane label="基础设置" name="1">
           <BaseSetting />
         </el-tab-pane>
         <el-tab-pane label="价格库存" name="2">
           <PriceSetting />
         </el-tab-pane>
         <el-tab-pane label="商品详情" name="3">
           <DetailSetting />
         </el-tab-pane>
       </el-tabs>
     </div>
   </template>
   
   <style scoped>
     
   </style>
   ```

3. 然后对对应的页面进行相应的开发即可

##### 基础设置 BaseSetting.vue

src/components/GoodsBaseSetting.vue

```vue
<script setup>
import { ref } from 'vue'
import { ElMessage } from 'element-plus';
import { useRouter } from 'vue-router'

const router = useRouter()

const queryParms = ref({
  name: '',
  dess:'',
  timeRange: '',
  category: 0
})

// 提交按钮
function submit() {
  ElMessage({
    type: 'success',
    message: '提交成功'
  })
}
// 取消按钮，其实就是往后退一步,用 router.go 方法实现
function cancel() {
  router.go(-1)
  ElMessage({
    type: 'warning',
    message: '取消成功'
  })
}
</script>

<template>
  <div>
    <el-container class="content-row">
      <div class="input-tip">商品名称</div>
      <div class="input-field">
        <el-input v-model="queryParms.name"></el-input>
      </div>
    </el-container>

    <el-container class="content-row">
      <div class="input-tip">商品简介: </div>
      <div class="input-field">
        <el-input type="textarea" :row="3" v-model="queryParms.desc"></el-input>
      </div>
    </el-container>

    <el-container class="content-row">
      <div class="input-tip">商品封面: </div>
      <div class="input-field">
        <el-upload :auto-upload="false" :limit="1" list-type="picture-card">
          <el-icon><Plus /></el-icon>
        </el-upload>
      </div>
    </el-container>

    <el-container class="content-row">
      <div class="input-tip">列表图片: </div>
      <div class="input-field">
        <el-upload :auto-upload="false" :limit="5" list-type="picture-card">
          <el-icon><Plus /></el-icon>
        </el-upload>
      </div>
    </el-container>

    <el-container class="content-row">
      <div class="input-tip">上架日期: </div>
      <div class="input-field">
        <el-date-picker 
        type="daterange" 
        range-separator="至" 
        start-placeholder="开始日期"
        end-placeholder="结束日期"
        v-model="queryParms.timeRange"
        >
      </el-date-picker>
      </div>
    </el-container>

    <el-container class="content-row">
      <div class="input-tip">商品分类: </div>
      <div class="input-field">
        <el-select v-model="queryParms.category" style="width: 100px;">
          <el-option key="0" label="男装" :value="0"></el-option>
          <el-option key="1" label="男鞋" :value="1"></el-option>
          <el-option key="2" label="围巾" :value="2"></el-option>
        </el-select>
      </div>
      <div>
        <el-button type="primary" round>添加分类</el-button>
      </div>
    </el-container>
    <el-container class="content-row">
      <el-button type="success" plain @click="submit">提交</el-button>
      <div style="margin-left: 40px;"></div>
      <el-button type="warning" plain @click="cancel">取消</el-button>
    </el-container>
  </div>
</template>

<style scoped>
  
</style>
```

![image-20250218125416347](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218125416347.png)

##### 价格库存 PriceSetting.vue

src/components/GoodsPriceSetting.vue

```vue
<script setup>
import{ ref } from 'vue'
import { ElMessage } from 'element-plus'
import { useRouter } from 'vue-router'

const router = useRouter()
const queryParams = ref({
  marketPrice: 0,
  showPrice: 0,
  coin: 0,
  price: 0,
  limit: 0,
  count: 0,
  sellCount: 0,
  viewCount: 0
})
// 提交按钮
function submit() {
  ElMessage({
    type: 'success',
    message: '提交成功'
  })
}
// 取消按钮，其实就是往后退一步,用 router.go 方法实现
function cancel() {
  router.go(-1)
  ElMessage({
    type: 'warning',
    message: '取消成功'
  })
}
</script>

<template>
  <div class="title">
    <div>价格设置</div>
  </div>
  <el-container class="content-row">
    <div class="input-tip">市场价: </div>
    <div class="input-field">
      <el-input v-model="queryParams.marketPrice"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
    <div class="input-tip">展示价: </div>
    <div class="input-field">
      <el-input v-model="queryParams.showPrice"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
    <div class="input-tip">积分数: </div>
    <div class="input-field">
      <el-input v-model="queryParams.coin"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
    <div class="input-tip">成本价: </div>
    <div class="input-field">
      <el-input v-model="queryParams.price"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
    <div class="input-tip">限购数: </div>
    <div class="input-field">
      <el-input v-model="queryParams.limit"></el-input>
    </div>
  </el-container>
  <div class="title">
    <div>库存设置</div>
  </div>
  <el-container class="content-row">
    <div class="input-tip">库存数量: </div>
    <div class="input-field">
      <el-input v-model="queryParams.count"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
    <div class="input-tip">基础销量: </div>
    <div class="input-field">
      <el-input v-model="queryParams.sellCount"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
    <div class="input-tip">浏览数量: </div>
    <div class="input-field">
      <el-input v-model="queryParams.viewCount"></el-input>
    </div>
  </el-container>
  <el-container class="content-row">
      <el-button type="success" plain @click="submit">提交</el-button>
      <div style="margin-left: 40px;"></div>
      <el-button type="warning" plain @click="cancel">取消</el-button>
    </el-container>
</template>

<style scoped>
.title {
  background-color: #e1e1e1;
  height: 35px;
  line-height: 35px;
  padding-left: 20px;
  margin-bottom: 15px;
}
</style>
```

![image-20250218130953215](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218130953215.png)



##### 商品详情页 DetailSetting.vue

商品性情页面的定制性通常较强，通常在商品上架添加时进行定制化设置、

本项目采用富文本编辑器第三方包 wangEditor，能够将富文本内容转换为 HTML 格式，操作简便

安装 wangEditor：npm i wangeditor --save

安装成功之后，在 src/components/goods 文件夹下新建一个 GoodsEdit.vue，用于富文本编辑区域的组件

然后将组件在 GoodsDetailSetting.vue 中使用标签使用即可

src/components/goods/GoodsEdit.vue

```vue
<script setup>
import E from 'wangeditor' 
import { ref, onMounted, getCurrentInstance} from 'vue'

// 用来获取当前组件的实例
const instance = getCurrentInstance()
// 定义组件事件，内容改变时调用
const emit = defineEmits(['contentChange'])
// 编辑器对象引用
let editor = null
const editorContent = ref('')

// 组件加载时渲染
onMounted(() => {
  editor = new E(instance.proxy.$refs.editorElem)
  // 编辑器事件，每次改变时获取其 HTML 内容
  editor.config.onchange = contentChange
  // 编辑器菜单设置
  editor.config.menus = [
    'head', // 标题
    'bold', // 粗体
    'fontSize', // 字号
    'fontName', // 字体
    'italic', // 斜体
    'underline', // 下划线
    'strikeThrough', // 删除线
    'foreColor', // 文字颜色
    'backColor', // 背景颜色
    'link', // 插入链接
    'list', // 列表
    'justify', // 对齐方式
    'quote', // 引用
    'emoticon', // 表情
    'image', // 插入图片
    'table', // 表格
    'code', // 插入代码
    'undo', // 撤销
    'redo' // 重复
  ]
  // 创建富文本实例
  editor.create()
})
function contentChange(html) {
  // 此 html 的值就是在富文本编辑器中输入的内容，只要输入，就会转换为 html 
  editorContent.value = html
  emit('contentChange', editorContent.value)
  // console.log(html)
}
</script>

<template>
  <div id="wangeditor">
    <div ref="editorElem" style="text-align: left;"></div>
  </div>
</template>

<style scoped>
  
</style>
```

在 src/components/GoodsDetailSetting.vue 中使用 GoodsEdit.vue

```vue
<script setup>
import GoodsEdit from './GoodsEdit.vue'
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage } from 'element-plus';

const router = useRouter()
const content = ref('');

// 富文本组件内容变化的回调，用 c 接收从子组件传递过来的 editorContent.value 的值
function contentChange(c) {
  // 将  editorContent.value 赋值给父组件的 content.value
  // 实现 子 --> 父数据共享
  content.value = c
}

// 提交按钮
function submit() {
  ElMessage({
    type: 'success',
    message: '提交成功'
  })
}
// 取消按钮，其实就是往后退一步,用 router.go 方法实现
function cancel() {
  router.go(-1)
  ElMessage({
    type: 'warning',
    message: '取消成功'
  })
}
</script>

<template>
  <div style="margin-bottom: 20px;">
    <!-- 绑定子组件的自定义事件相对的事件处理函数，只要子组件数据变化，则触发 contentChange 函数 -->
    <GoodsEdit @contentChange="contentChange"/>
  </div>
  <el-container class="content-row">
    <el-button type="success" plain @click="submit">提交</el-button>
    <div style="margin-left: 40px;"></div>
    <el-button type="warning" plain @click="cancel">取消</el-button>
  </el-container>
</template>

<style>
  
</style>
```

![image-20250218134129744](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218134129744.png)



#### 3、商品分类页面

商品管理模块最后一个页面，商品分类页面 GoodsCategory.vue

相对简单

- 一个列表展示已有的分类
- 添加、删除功能

在 src/goods 文件夹下新建 GoddsCategory.vue 组件

```vue
<script setup>
import { ref } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'

const categoryList = ref([
  {id: 1231, name: '男装', manager: '管理员用户01'},
  {id: 1131, name: '男鞋', manager: '管理员用户01'},
  {id: 1031, name: '帽子', manager: '管理员用户01'},
])

// 添加分类按钮，向 categoryList 数组中添加新对象
function handleClick() {
  ElMessageBox.prompt('请添加分类', '新增分类',{
    confirmButtonText: 'OK',
    cancelButtonText: 'Cancel',
  }).then(({value}) => {
    categoryList.value.push({
      id: 1000,
      name: value,
      manger: '管理员用户01'
    })
  })
}
// 删除按钮, 从 categoryList 数组中删除对象
function deleteCategory() {
  ElMessageBox.alert('确认要删除吗', {
    confirmButtonText: 'OK',
    cancelButtonText: 'Cancel',
  }).then((index) => {
    categoryList.value.splice(index, 1)
  })
}
</script>

<template>
  <div class="content-container">
    <div class="content-row">
      <el-button type="primary" @click="handleClick">添加分类</el-button>
    </div>
    <div class="content-row" >
      <el-table :data="categoryList">
        <el-table-column label="分类ID" prop="id"></el-table-column>
        <el-table-column label="分类名称" prop="name"></el-table-column>
        <el-table-column label="分类负责人" prop="manager"></el-table-column>
        <el-table-column label="操作">
          <template #default="scope">
            <el-button @click="deleteCategory(scope.$index)">删除</el-button>
          </template>
        </el-table-column>
      </el-table>
    </div>
  </div>
</template>

<style scoped>
  
</style>
```

![image-20250218155228579](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218155228579.png)

![image-20250218155239265](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218155239265.png)

在 新增商品 AddGoods.vue 的 基础设置页面 GoodsBaseSetting.vue 页面为 添加分类按钮绑定路由跳转

 GoodsBaseSetting.vue 文件中为添加分类按钮绑定路由跳转事件处理函数

``` vue
<script setup>
// 店家添加分类按钮跳转到 商品分类页面
function ToRouter(){
  router.push({ name: 'GoodsCategory' })
}
</script>
<template>
	<el-button type="primary" round @click="ToRouter">添加分类</el-button>
</template>
```



至此，商品管理模块的功能与页面大致开发完成，在真实的开发中，应当与后台接口继续完善功能



### 五、店长管理模块

组件设置，分为三个组件

- ManagerList.vue：店长列表
- ManagerReqList.vue：店长申请审批列表
- ManagerOrder.vue：店长订单

在 src/manager 文件夹下 新建这三个组件，并在路由地址中添加子路由

src/router/index.js

```js
// 店长列表子路由
        {
          path:'ownerlist',
          component: () => import('../components/manager/ManagerList.vue'),
          name:'ManagerList'
        },
        // 店长申请列表子路由
        {
            path:'ownerreq',
            component: () => import('../components/manager/ManagerReqList.vue'),
            name:'ManagerReqList'
        
        },
        // 店长订单子路由
        {
            path:'ownerorder',
            component: () => import('../components/manager/ManagerOrder.vue'),
            name:'ManagerOrder'
        },
```

#### 1、店长列表页面

1. 在 src/mock/mock.js 中定义模拟数据

   ```js
   // src/mock/mock.js
   // 模拟店长列表数据
     getManagerList() {
       let array = []
       for(let i = 0; i < mockjs.Random.integer(5, 10); i++) {
         array.push(mockjs.mock({
           'people': mockjs.Random.csentence(),
           'weixin': mockjs.Random.string(7, 10),
           'state': mockjs.Random.boolean(),
           'income': mockjs.Random.integer(0, 500000000) + '元',
           'back': mockjs.Random.integer(0, 1000) + '元',
           'backPrice': mock.Random.integer(0, 5000) + '元',
           'source': '站内',
           'customer': mockjs.Random.integer(0, 50),
           'time': mockjs.Random.datetime('yyyy-MM-dd A HH:MM:SS')
         }))
       }
       return array 
     }
   ```

2. 在 ManagerList.vue 中导入 getManagerList 数据，并且编写模板界面和接口函数

   ```vue
   // ManagerList.vue
   <script setup>
   import { ref, onMounted } from 'vue'
   import mock from '../../mock/mock'
   import { ElMessage } from 'element-plus';
   
   const getManagerList = ref([])
   
   // 组件加载时渲染 mockjs 随机生成的数据
   onMounted(() => {
     getManagerList.value = mock.getManagerList()
   });
   
   // 定义筛选条件
   const queryParams = ref({
     phone: '',
     name: '',
     state: ''
   })
   // 定义搜索函数
   function search (){
     ElMessage({
       type: 'success',
       message: '搜索成功'
     })
     getManagerList.value = mock.getManagerList()
   }
   // 清空搜索按钮
   function clear() {
     queryParams.value = {
       phone: '',
       name: '',
       state: ''
     },
     getManagerList.value = mock.getManagerList()
     ElMessage({
       type: 'success',
       message: '清空成功'
     })
   }
   </script>
   
   <template>
     <div class="content-container" direction="vertical">
       <div>
         <el-container class="content-row">
           <div class="input-tip">店长手机 : </div>
           <div class="input-field">
             <el-input v-model="queryParams.phone"></el-input>
           </div>
           <div class="input-tip">店长昵称 : </div>
           <div class="input-field">
             <el-input v-model="queryParams.name"></el-input>
           </div>
           <div class="input-tip">店长状态 : </div>
           <div class="input-field">
             <el-select style="width: 150px;" placeholder="请选择" v-model="queryParams.state">
               <el-option label="后台开通" :value="1" key="1"></el-option>
               <el-option label="站外申请" :value="2" key="2"></el-option>
             </el-select>
           </div>
         </el-container>
         <el-container class="content-row">
           <el-button type="primary" @click="search">搜索</el-button>
           <el-button type="warning" @click="clear">清空搜索条件</el-button>
         </el-container>
       </div>
       <div>
         <el-table :data="getManagerList">
           <el-table-column label="分销人信息" prop="people"></el-table-column>
           <el-table-column label="微信信息" prop="weixin"></el-table-column>
           <el-table-column label="状态">
             <template #default="scope">
               <el-tag 
               :type="scope.row.state ? 'success' : 'primary'">
               {{ scope.row.state ? '激活' : '审核中' }}
               </el-tag>
             </template>
           </el-table-column>
           <el-table-column label="收入总额" prop="income"></el-table-column>
           <el-table-column label="退款" prop="backPrice"></el-table-column>
           <el-table-column label="来源">
             <template #default="scope">
               <el-tag type="primary">
                 {{ scope.row.source }}
               </el-tag>
             </template>
           </el-table-column>
           <el-table-column label="客户数量" prop="customer"></el-table-column>
           <el-table-column label="更新时间" prop="time"></el-table-column>
         </el-table>
       </div>
     </div>
   </template>
   
   <style scoped>
     
   </style>

![image-20250218164824536](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218164824536.png)

#### 2、店长申请审批列表

还是利用 mockjs.getManagerList() 生成随机的数据，然后渲染到页面即可

1. 导入 mockjs.getManagerList()

   ```js
   import mock from '../../mock/mock'
   ```

2. 编写 ManagerReqList 的模板结构和数据接口
   ```vue
   <script setup>
   import { ref, onMounted } from 'vue'
   import mock from '../../mock/mock'
   import { ElMessage } from 'element-plus'
   
   const getManagerList = ref([])
   
   // 组件加载时渲染 mockjs 随机生成的数据
   onMounted(() => {
     getManagerList.value = mock.getManagerList()
   });
   
   
   const queryParams = ref({
     phone: '',
     name: '',
     state: ''
   })
   
   // 定义搜索函数
   function search (){
     ElMessage({
       type: 'success',
       message: '搜索成功'
     })
     getManagerList.value = mock.getManagerList()
   }
   // 清空搜索按钮
   function clear() {
     queryParams.value = {
       phone: '',
       name: '',
     },
     getManagerList.value = mock.getManagerList()
     ElMessage({
       type: 'warning',
       message: '清空成功'
     })
   }
   </script>
   
   <template>
     <div class="content-container">
       <div>
         <el-container class="content-row">
           <div class="input-tip">用户状态</div>
           <div class="input-field">
             <el-input v-model="queryParams.name"></el-input>
           </div>
           <div class="input-tip">用户信息</div>
           <div class="input-field">
             <el-input v-model="queryParams.state"></el-input>
           </div>
         </el-container>
         <el-container class="content-row">
           <el-button type="primary" @click="search">搜索</el-button>
           <el-button type="primary" @click="clear">清空搜索条件</el-button>
         </el-container>
       </div>
     </div>
     <div>
       <el-table :data="getManagerList">
         <el-table-column label="用户信息" prop="people"></el-table-column>
         <el-table-column label="状态">
           <template #default="scope">
             <el-tag :type="scope.row.state ? 'success' : 'warning'">
               {{ scope.row.state ? '通过' : '待审核'}}
             </el-tag>
           </template>
         </el-table-column>
         <el-table-column label="更新时间"></el-table-column>
         <el-table-column label="添加时间"></el-table-column>
         <el-table-column label="操作">
           <template #default="scope">
             <el-button 
             :type="scope.row.state ? 'warning' : 'success'"
             @click="scope.row.state = !scope.row.state "
             size="small"
             >
             {{ scope.row.state ? '下线' : '通过' }}</el-button>
           </template>
         </el-table-column>
       </el-table>
     </div>
   </template>
   
   <style scoped>
     
   </style>

![image-20250218170536183](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218170536183.png)

#### 3、店长订单页面

同之前两个页面的思路一致

ManagerOrder.vue

```vue
<script setup>
import { ref, onMounted } from 'vue'
import mock from '../../mock/mock'
import { ElMessage } from 'element-plus'
// 导入 导出 JSON 数据的方法
import tools from '../../tools/tools'

const getManagerList = ref([])

// 组件加载时渲染 mockjs 随机生成的数据
onMounted(() => {
  getManagerList.value = mock.getManagerList()
});


const queryParams = ref({
    state:"",
    user:"",
    name:"",
    sendTime:"",
    payTime:""
})

// 定义搜索函数
function search (){
  ElMessage({
    type: 'success',
    message: '搜索成功'
  })
  getManagerList.value = mock.getManagerList()
}
// 清空搜索按钮
function clear() {
  queryParams.value = {
    state:"",
    user:"",
    name:"",
    sendTime:"",
    payTime:""
  },
  getManagerList.value = mock.getManagerList()
  ElMessage({
    type: 'warning',
    message: '清空成功'
  })
}
// 导出按钮
function exportData() {
  tools.exportJson('订单.Json', JSON.stringify(getManagerList.value))
}
</script>

<template>
  <div class="content-container">
    <div>
      <el-container class="content-row">
        <div class="input-tip">订单状态</div>
        <div class="input-field">
          <el-input v-model="queryParams.state"></el-input>
        </div>
        <div class="input-tip">订单名称</div>
        <div class="input-field">
          <el-input v-model="queryParams.name"></el-input>
        </div>
        <div class="input-tip">用户名称</div>
        <div class="input-field">
          <el-input v-model="queryParams.user"></el-input>
        </div>
      </el-container>
      <el-container class="content-row">
        <div class="input-tip">发货时间</div>
        <div class="input-field">
        <el-date-picker v-model="queryParams.sendTime"></el-date-picker>
        </div>
        <div class="input-tip">支付时间</div>
        <div class="input-field">
        <el-date-picker v-model="queryParams.payTime"></el-date-picker>
        </div>
      </el-container>
      <el-container class="content-row">
        <el-button type="primary" @click="search">搜索</el-button>
        <el-button type="primary" @click="clear">清空搜索条件</el-button>
        <el-button type="primary" @click="exportData">导出</el-button>
      </el-container>
    </div>
  </div>
  <div>
    <el-table :data="getManagerList">
      <el-table-column label="类型" prop="source"></el-table-column>
      <el-table-column label="名称" prop="weixin"></el-table-column>
      <el-table-column label="订单号" prop="weixin"></el-table-column>
      <el-table-column label="店长信息" prop="people"></el-table-column>
      <el-table-column label="件数" prop="customer"></el-table-column>
      <el-table-column label="价格" prop="backPrice"></el-table-column>
      <el-table-column label="佣金" prop="back"></el-table-column>
      <el-table-column label="支付时间" prop="time"></el-table-column>
      <el-table-column label="发货时间" prop="time"></el-table-column>
    </el-table>
  </div>
</template>

<style scoped>
  
</style>
```

![image-20250218173136293](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218173136293.png)



### 六、财务管理模块

财务管理模块分为两个页面

- TradeInfo.vue：交易明细
- TradeList.vue：财务对账单

这两个组件基本上和店长管理模块的页面差不多，思路也差不多

1. 导入 mockjs 生成的随机数据
2. 搭建模板结构，将随机生成的数据渲染到页面

TradeIInfo.vue

```vue
<script setup>
import { ref, onMounted } from 'vue'
import mock from '../../mock/mock'
import { ElMessage } from 'element-plus'
// 导入 导出 JSON 数据的方法
import tools from '../../tools/tools'

const getManagerList = ref([])

// 组件加载时渲染 mockjs 随机生成的数据
onMounted(() => {
  getManagerList.value = mock.getManagerList()
});


const queryParams = ref({
    state:"",
    user:"",
    name:"",
    sendTime:"",
    payTime:""
})

// 定义搜索函数
function search (){
  ElMessage({
    type: 'success',
    message: '搜索成功'
  })
  getManagerList.value = mock.getManagerList()
}
// 清空搜索按钮
function clear() {
  queryParams.value = {
    state:"",
    user:"",
    name:"",
    sendTime:"",
    payTime:""
  },
  getManagerList.value = mock.getManagerList()
  ElMessage({
    type: 'warning',
    message: '清空成功'
  })
}
// 导出按钮
function exportData() {
  tools.exportJson('订单.Json', JSON.stringify(getManagerList.value))
}
</script>

<template>
  <div class="content-container">
    <div>
      <el-container class="content-row">
        <div class="input-tip">商品名称</div>
        <div class="input-field">
          <el-input v-model="queryParams.state"></el-input>
        </div>
        <div class="input-tip">用户名称</div>
        <div class="input-field">
          <el-input v-model="queryParams.name"></el-input>
        </div>
        <div class="input-tip">手机号码</div>
        <div class="input-field">
          <el-input v-model="queryParams.user"></el-input>
        </div>
      </el-container>
      <el-container class="content-row">
        <div class="input-tip">订单类型</div>
        <div class="input-field">
          <el-input v-model="queryParams.user"></el-input>
        </div>
        <div class="input-tip">平台单号</div>
        <div class="input-field">
          <el-input v-model="queryParams.user"></el-input>
        </div>
        <div class="input-tip">发货时间</div>
        <div class="input-field">
        <el-date-picker v-model="queryParams.sendTime"></el-date-picker>
        </div>
      </el-container>
      <el-container class="content-row">
        <el-button type="primary" @click="search">搜索</el-button>
        <el-button type="primary" @click="clear">清空搜索条件</el-button>
        <el-button type="primary" @click="exportData">导出</el-button>
      </el-container>
    </div>
  </div>
  <div>
    <el-table :data="getManagerList">
      <el-table-column label="类型" prop="source"></el-table-column>
      <el-table-column label="单号" prop="weixin"></el-table-column>
      <el-table-column label="用户" prop="people"></el-table-column>
      <el-table-column label="支付方式">
        <template #default="scope">
          <el-tag>
            {{ scope.row.state ? '网上支付' : '线下支付' }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column label="支付时间" prop="time"></el-table-column>
    </el-table>
  </div>
</template>

<style scoped>
  
</style>
```

![image-20250218180056100](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250218180056100.png)

TradeList.vue

```vue
<script setup>
import { ref, onMounted } from 'vue'
import mock from '../../mock/mock'

const activeTab = ref("1")

let List = mock.getManagerList()

function month() {
  List.value = mock.getManagerList()
}
</script>

<template>
  <div class="content-container">
    <el-tabs v-model="activeTab" type="card">
      <el-tab-pane label="日汇总" name="1">
        <el-table :data="List">
          <el-table-column label="日期" prop="time"></el-table-column>
          <el-table-column label="收入" prop="backPrice"></el-table-column>
          <el-table-column label="支出" prop="back"></el-table-column>
          <el-table-column label="备注" prop="source"></el-table-column>
        </el-table>
      </el-tab-pane>
      <el-tab-pane label="月汇总" name="2" @click="month">
        <el-table :data="List">
          <el-table-column label="日期" prop="time"></el-table-column>
          <el-table-column label="收入" prop="income"></el-table-column>
          <el-table-column label="支出" prop="backPrice"></el-table-column>
          <el-table-column label="备注" prop="people"></el-table-column>
        </el-table>
      </el-tab-pane>
    </el-tabs>
  </div>
</template>

<style scoped>
  
</style>
```

### 七、基础管理模块

基础管理模块只有一个页面

- DataCom：数据统计页面

此页面将使用到 Echarts 包，渲染图表

1. 安装 ECharts 模块：npm i echarts --save

2. 在 mockjs 中编写随机数据，供 Echarts 使用
   ```js
   // mockjs
   // Echarts 数据
   getChartsData() {
           let array = [];
           for (let i = 0; i < 6; i ++) {
               array.push(mockjs.Random.integer(0,100))
           }
           return array;
     },
     // 随即将定义的数据，供 Echarts 使用
     getTradeData() {
       return mockjs.mock({
         'allTra':mockjs.Random.integer(10000,50000),
         'speTra':mockjs.Random.integer(0,5000),
         'norTra':mockjs.Random.integer(0,5000),
         'userCount':mockjs.Random.integer(0,1000),
         'managerCount':mockjs.Random.integer(0,100),
         'time':mockjs.Random.datetime('yyyy-MM-dd A HH:mm:ss'),
       })
     }

3. 在 src/financial/ 新建 Echarts.vue文件
   ```vue
   <script setup>
   import { Refresh } from '@element-plus/icons-vue';
   import * as echarts from 'echarts'
   import { onMounted, watch, getCurrentInstance } from 'vue';
   
   // 使用 props 自定义属性实现 父组件 DataCom 向子组件共享数据
   const props = defineProps(['xData', 'data'])
   // 获取当前组件实例
   const instance = getCurrentInstance()
   
   // 监听 父组件中的数据
   watch(props, () => {
     Refresh()
   })
   
   onMounted(() => {
     Refresh()
   })
   
   function Refresh() {
     let chart = echarts.init(instance.proxy.$refs.chart)
     chart.clear()
     chart.setOption({
       xAxis: {
         data: props.xData
       },
       yAxis: {
         type: 'value'
       },
       series: {
         type: 'line',
         data: props.data
       }
     })
   }
   </script>
   
   <template>
     <div ref="chart"></div>
   </template>
   
   <style scoped>
     
   </style>
   ```

4. Echarts是自定义的图表，现在新建一个 DataCom.vue，进行路由配置后，搭建页面
   ```vue
   <script setup>
   import * as echarts from 'echarts'
   import { onMounted, watch, getCurrentInstance } from 'vue';
   
   // 使用 props 自定义属性实现 父组件 DataCom 向子组件共享数据
   const props = defineProps(['xData', 'data'])
   // 获取当前组件实例
   const instance = getCurrentInstance()
   
   // 监听 父组件中的数据
   watch(props, () => {
     refresh()
   })
   
   // onMounted(() => {
   //   refresh()
   // })
   
   function  refresh() {
     let chart = echarts.init(instance.proxy.$refs.chart)
     chart.clear()
     chart.setOption({
       xAxis: {
         data: props.xData
       },
       yAxis: {
         type: 'value'
       },
       series: {
         type: 'line',
         data: props.data
       }
     })
   }
   </script>
   
   <template>
     <div ref="chart"></div>
   </template>
   
   <style scoped>
     
   </style>



至此。完整的项目已经搭建完成

真是工作中，需要和后端配合调取数据进行渲染









## 用到的包

- vue：3.4.37
- vue-router：4.5.0
- pinia：3.0.1
- element-plus：2.9.4
- @element-plus/icons-vue：2.3.1
- mockjs：前后端分离，可以拦截 Ajax 请求，返回模拟的响应数据1.1.0
- wangEditor：富文本编辑器插件，4.7.15
- echarts：5.6.0

## 问题记录

- [vue3](https://so.csdn.net/so/search?q=vue3&spm=1001.2101.3001.7020)的动态路由问题导致刷新完页面会爆出`[Vue Router warn]: No match found for location with path "xxx"`问题

  > 在配置 order 子路由时，出现找不到本地文件，解决方案：将path修改为 `path: '/:pathMatch(.*)*'`
  >
  > ```js
  > { 
  >   path: '/:pathMatch(.*)*',  // 0是普通订单
  >   component: () => import('../components/order/Order.vue'),
  >   name: "Order"
  > },

















